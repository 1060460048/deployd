#!/usr/bin/env node

/**
 * Dependencies
 */

var program = require('commander')
	,	deployd = require('../')
	,	repl = require('../lib/client/repl');

/**
 * Get the version number from the package.json
 */

program.version(require('../package').version);

/**
 * Commands
 */

program
	.command('repl [port] [host]')
	.description('start an interactive shell (port, host - optional)')
	.action(repl);

program
	.command('start [port]')
	.description('boot the server in the current directory (port - optional)')
	.action(function (port) {
		var dpd = deployd({port: port, db: {host: '127.0.0.1', port: 27017, name: 'test-db'}});
		dpd.listen();
		dpd.on('listening', function () {
			console.info('listening on port', dpd.options);
		})
	});

/**
 * Parse the arguments
 */

program.parse(process.argv);
